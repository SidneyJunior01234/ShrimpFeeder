# Shrimp Click Detection using Passive Acoustic Monitoring

This repository implements a modular pipeline for detecting shrimp clicks using passive acoustic monitoring based on Digital Signal Processing (DSP) techniques. The objective is to develop a reproducible, scalable, and modular framework for quantifying shrimp feeding activity by analyzing acoustic data.

The project is structured to maintain a clear separation of processing stages: data processing, feature extraction, event detection, and aggregation. All parameter configurations are consolidated into a single `config.yaml` file for clarity and consistency.

---

## âœ… Project Structure

```

onset-shrimp-detection/
â”œâ”€â”€ README.md                  # Project overview and documentation
â”œâ”€â”€ requirements.txt           # Python dependencies
â”œâ”€â”€ .gitignore                 # Files and directories to be excluded from version control
â”œâ”€â”€ setup.py                   # Installation script for the package
â”œâ”€â”€ setup_structure.py         # Script to automatically generate project structure and placeholder files
â”œâ”€â”€ config/                    # Configuration files for parameter management
â”‚   â”œâ”€â”€ __init__.py            # Marks the config directory as a package
â”‚   â””â”€â”€ config.yaml            # Single consolidated configuration file
â”œâ”€â”€ data/                      # Data directory for organizing datasets
â”‚   â”œâ”€â”€ __init__.py            # Marks the data directory as a package
â”‚   â”œâ”€â”€ raw/                   # Unprocessed audio data
â”‚   â”œâ”€â”€ processed/             # Processed datasets (e.g., segmented audio)
â”‚   â”œâ”€â”€ interim/               # Temporary datasets during processing
â”‚   â””â”€â”€ metadata/              # Detection results and event annotations
â”œâ”€â”€ models/                    # Directory for extracted features and potential ML models
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ extracted_features/    # Feature vectors (e.g., SF, HFC, WPD, CD)
â”œâ”€â”€ notebooks/                 # Jupyter notebooks for data exploration and experimentation
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ exploratory/           # Exploratory Data Analysis (EDA)
â”œâ”€â”€ src/                       # Source code for data processing, feature extraction, detection, and aggregation
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config/                # Configuration management module
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ config_loader.py   # Load configuration parameters
â”‚   â”œâ”€â”€ data/                  # Data processing module
â”‚   â”‚   â””â”€â”€ preprocess.py      # Audio loading and segmentation functions
â”‚   â”œâ”€â”€ features/              # Feature extraction module
â”‚   â”‚   â””â”€â”€ extract_features.py # DSP-based feature extraction (SF, HFC, WPD, CD)
â”‚   â”œâ”€â”€ detection/             # Event detection module
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ detect_clicks.py       # Core detection logic for a single `.wav` file
â”‚   â”‚   â””â”€â”€ process_directory.py   # Orchestrates multi-file processing and directory scanning
â”‚   â”œâ”€â”€ visualization/                # Visualization tools for EDA, spectrograms, and result inspection
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ plot_setup.py       # Configures plot aesthetics
â”‚   â”‚   â””â”€â”€ plot_spectrogram.py   # Plot spectrograms
â”‚   â””â”€â”€ aggregation/           # Aggregation module (future use)
â”‚       â””â”€â”€ aggregate_detections.py # Aggregate detection results over time
â”œâ”€â”€ tests/                     # Unit and integration tests for DSP functions
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_data.py
â”‚   â”œâ”€â”€ test_features.py
â”‚   â””â”€â”€ test_detection.py
â””â”€â”€ logs/                      # Logs generated during data processing and detection

```

### ðŸ“‚ Main Directories:
- **src/**: Core modules for data processing, feature extraction, detection, and (future) aggregation.
- **config/**: Single consolidated configuration file (`config.yaml`) for all processing parameters.
- **data/**: Data storage, including raw audio data, processed data, and detection outputs.
- **models/**: Placeholder for extracted features and potential ML model storage.
- **notebooks/**: Jupyter notebooks for exploratory data analysis and verification.
- **tests/**: Unit tests for core processing modules.
- **logs/**: Logs for monitoring data processing and detection workflows.

---

## âœ… Installation

1. Clone the repository:

```bash
git clone https://github.com/igendriz/onset-shrimp-detection.git
cd onset-shrimp-detection
```

2. Create a virtual environment and activate it:

```bash
python -m venv .venv
source .venv/bin/activate  # Unix/Mac
.venv\Scripts\activate  # Windows
```

3. Install the dependencies:

```bash
pip install -r requirements.txt
```

4. Verify the structure by running the setup script:

```bash
python setup_structure.py
```

---

## ðŸš€ Usage

1. **Data Processing:**

- Extract audio segments and preprocess data:

```bash
python src/data/preprocess.py
```

2. **Feature Extraction:**

- Compute SF, HFC, WPD, and CD for each audio segment:

```bash
python src/features/extract_features.py
```

3. **Onset Detection:**

- Detect click events and generate detection files:

```bash
python src/detection/event_detection.py
```

4. **Data Aggregation (Future Implementation):**

- Aggregate detection files over defined time windows (1-second windows, for example).

---

## âœ… Configuration

All parameters (e.g., window sizes, thresholds, frequency bands) are consolidated into a single configuration file located at `config/config.yaml`.

Example structure of `config/config.yaml`:

```yaml
audio:
  default_fs: 44100

processing:
  short_term_duration: 0.001
  mid_term_duration: 1.0

  detection:
    threshold: 0.2
    frequency_band:
      low: 1000
      high: 5000

aggregation:
  window_size: 1.0
```

---

## ðŸŒ± Future Work

- Develop data aggregation and quantification for feeding activity analysis.
- Implement visualization tools for detection and aggregation results.
- Explore ML-based approaches for post-processing and event classification.

---

## ðŸ“„ License

This project is licensed under the MIT License.
